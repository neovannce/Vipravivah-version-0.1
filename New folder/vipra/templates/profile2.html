<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Address & Family Details - विप्रVivah</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="progress-nav">
        <div class="progress-steps">
            <div class="step">1</div>
            <div class="step ">2</div>
            <div class="step active">3</div>
            <div class="step">4</div>
            <div class="step">5</div>
        </div>
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle Theme">
            <i class="fas fa-moon"></i>
        </button>
    </div>

    <div class="profile-container">
        <div class="profile-header">
            <h1>Address & Family Details</h1>
            <p>Please provide your address and family information</p>
        </div>

        <form class="profile-form" action="{{ url_for('profile2') }}" method="POST">
            <div class="address-section">
                <h3>Temporary Address</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="temp-address">Street Address*</label>
                        <input type="text" id="temp-address" name="temp_address" required placeholder="Enter street address">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="temp-city">City*</label>
                        <input type="text" id="temp-city" name="temp_city" required>
                    </div>
                    <div class="form-group">
                        <label for="temp-district">District*</label>
                        <input type="text" id="temp-district" name="temp_district" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="temp-state">State*</label>
                        <input type="text" id="temp-state" name="temp_state" required>
                    </div>
                    <div class="form-group">
                        <label for="temp-pincode">Pincode*</label>
                        <input type="text" id="temp-pincode" name="temp_pincode" required>
                    </div>
                </div>
            </div>

            <div class="form-group" style="margin: 1rem 0;">
                <div class="checkbox-item">
                    <input type="checkbox" id="same-as-temp" name="same_as_temp">
                    <label for="same-as-temp">Permanent Address same as Temporary Address</label>
                </div>
            </div>

            <div class="address-section">
                <h3>Permanent Address</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="perm-address">Street Address*</label>
                        <input type="text" id="perm-address" name="perm_address" required placeholder="Enter street address">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="perm-city">City*</label>
                        <input type="text" id="perm-city" name="perm_city" required>
                    </div>
                    <div class="form-group">
                        <label for="perm-district">District*</label>
                        <input type="text" id="perm-district" name="perm_district" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="perm-state">State*</label>
                        <input type="text" id="perm-state" name="perm_state" required>
                    </div>
                    <div class="form-group">
                        <label for="perm-pincode">Pincode*</label>
                        <input type="text" id="perm-pincode" name="perm_pincode" required>
                    </div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Lives with family?*</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="lives-with-family-yes" name="lives_with_family" value="Yes" required>
                            <label for="lives-with-family-yes">Yes</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="lives-with-family-no" name="lives_with_family" value="No" required>
                            <label for="lives-with-family-no">No</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="marital-status">Marital Status*</label>
                    <select id="marital-status" name="marital_status" required>
                        <option value="" disabled selected>Select marital status</option>
                        <option value="First Marriage">First Marriage</option>
                        <option value="Divorcee">Divorcee</option>
                        <option value="Widowed">Widowed</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>Food Habits*</label>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="diet-veg" name="diet" value="Veg">
                        <label for="diet-veg">Veg</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="diet-non-veg" name="diet" value="Non-Veg">
                        <label for="diet-non-veg">Non-Veg</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="diet-occasionally-non-veg" name="diet" value="Occasionally Non-Veg">
                        <label for="diet-occasionally-non-veg">Occasionally Non-Veg</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="diet-eggetarian" name="diet" value="Eggetarian">
                        <label for="diet-eggetarian">Eggetarian</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="diet-jain" name="diet" value="Jain">
                        <label for="diet-jain">Jain</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="diet-vegan" name="diet" value="Vegan">
                        <label for="diet-vegan">Vegan</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="diet-other" name="diet" value="Other">
                        <label for="diet-other">Other</label>
                    </div>
                </div>
            </div>

            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="window.location.href='{{ url_for('profile') }}'">
                    <i class="fas fa-arrow-left"></i> Back
                </button>
                <button type="submit" class="btn btn-primary">
                    Continue <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </form>
    </div>

    <script>
        // Add smooth transitions and form validation
        document.querySelectorAll('input, select').forEach(element => {
            element.addEventListener('focus', function() {
                this.parentElement.classList.add('focused');
            });
            element.addEventListener('blur', function() {
                this.parentElement.classList.remove('focused');
            });
        });

        // Handle address copying functionality
        document.getElementById('same-as-temp').addEventListener('change', function() {
            const tempFields = {
                'temp-address': 'perm-address',
                'temp-city': 'perm-city',
                'temp-district': 'perm-district',
                'temp-state': 'perm-state',
                'temp-pincode': 'perm-pincode'
            };

            const permFields = document.querySelectorAll('[id^="perm-"]');
            
            if (this.checked) {
                // Copy values from temporary to permanent address fields
                for (const [tempId, permId] of Object.entries(tempFields)) {
                    const tempValue = document.getElementById(tempId).value;
                    document.getElementById(permId).value = tempValue;
                    document.getElementById(permId).disabled = true;
                }
            } else {
                // Clear and enable permanent address fields
                permFields.forEach(field => {
                    field.value = '';
                    field.disabled = false;
                });
            }
        });

        // Update permanent address when temporary address changes if checkbox is checked
        document.querySelectorAll('[id^="temp-"]').forEach(tempField => {
            tempField.addEventListener('input', function() {
                if (document.getElementById('same-as-temp').checked) {
                    const permField = document.getElementById(this.id.replace('temp-', 'perm-'));
                    if (permField) {
                        permField.value = this.value;
                    }
                }
            });
        });
    </script>

    <script>
        const toggleBtn = document.getElementById('theme-toggle');
        const icon = toggleBtn?.querySelector('i');

        function applyTheme(theme) {
            if (theme === 'dark') {
                document.body.classList.add('dark-mode');
                if (icon) {
                    icon.classList.remove('fa-moon');
                    icon.classList.add('fa-sun');
                }
            } else {
                document.body.classList.remove('dark-mode');
                if (icon) {
                    icon.classList.remove('fa-sun');
                    icon.classList.add('fa-moon');
                }
            }
        }

        // Load theme on page load
        window.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'light';
            applyTheme(savedTheme);
        });

        // Handle toggle button
        if (toggleBtn) {
            toggleBtn.addEventListener('click', () => {
                const isDark = document.body.classList.contains('dark-mode');
                const newTheme = isDark ? 'light' : 'dark';
                localStorage.setItem('theme', newTheme);
                applyTheme(newTheme);
            });
        }
    </script>
</body>
</html>